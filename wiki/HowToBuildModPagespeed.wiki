#summary Explains how to build mod_pagespeed Apache module.

= Introduction =

Apache module mod_pagespeed build using the gyp build system.

= Prerequisites =

To build mod_pagespeed you will need to install the prerequisite software for your platform. You only need to get the prerequisites for your platform. Don't sync the Chromium source tree or anything like that.

  * [http://code.google.com/p/chromium/wiki/LinuxBuildInstructionsPrerequisites Linux]

Regardless of platform, you will need to install the Chromium [http://dev.chromium.org/developers/how-tos/install-gclient depot tools].

= Check out the code =
Create a directory to hold your source code.  It is important that the full directory path contains no spaces.

  * `mkdir mod_pagespeed`
  * `cd mod_pagespeed`
  * `gclient config http://page-speed.googlecode.com/svn/mod_pageseed/trunk/src`
  * `gclient update --force`


= Compile the code =
Build on Linux only for now.
  * Linux
    # Run: `cd src/build; hammer -j4 --mode=Release`.
    # Build output will appear under `src/sconsbuild`.

= Deploy =
Copy the build output to Apache2 (assume Apache2 is installed at /usr/local/apache2).
  `cp src/sconsbuild/Release/libmod_pagespeed.so /usr/local/apache2/modules/mod_pagespeed.so`

= Configure Apache =

Put the following into conf/httd.conf
{{{
LoadModule pagespeed_module modules/mod_pagespeed.so
<Directory />
AddOutputFilterByType PAGESPEED  text/html
</ Directory>
}}}

= Restart Apache =

  * `/usr/local/apache2/bin/apachectl stop`
  * `/usr/local/apache2/bin/apachectl start`

