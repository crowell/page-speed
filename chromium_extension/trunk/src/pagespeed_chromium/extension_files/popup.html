<!doctype html>
<html>
  <head>
    <title>Page Speed</title>
    <script>
      function runPageSpeed() {
        try {
          var pagespeed = document.getElementById('pagespeed');
          var result_textarea = document.getElementById('result_textarea');
          var har_textarea = document.getElementById('har_textarea');
          var result = pagespeed.runPageSpeed(har_textarea.value);
          result_textarea.value = result;
        } catch (e) {
          alert(e.message);
        }
      }
    </script>
  </head>
  <body onload="pageDidLoad()" style="min-width:400px;">
    <embed name="nacl_module" id="pagespeed" width="0" height="0"
           type="application/x-nacl-srpc" />
    <script>
      // Note: This code is here to work around a bug in Chromium build #47357.
      //       If we set the nexes attribute directly in the embed tag, then
      //       the NaCl plugin will crash.  See also
      //       http://code.google.com/p/nativeclient/issues/detail?id=500
      document.getElementById('pagespeed').nexes =
        'x86-32: pagespeed_x86_32.nexe\n' +
        'x86-64: pagespeed_x86_64.nexe\n' +
        'ARM: pagespeed_arm.nexe ';
    </script>

    <h1>Page Speed</h1>
    <p>
      <button onclick="runPageSpeed()">Run Page Speed</button>
    </p>
    <p>
      <textarea id="har_textarea" cols="40" rows="6">Paste HAR here</textarea>
      <textarea id="result_textarea" cols="40" rows="6"></textarea>
    </p>
  </body>
</html>
